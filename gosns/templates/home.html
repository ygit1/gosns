{{define "content"}}
<div class="container">
    <div class="row">
        <div class="col-md-8">
            {{if .IsAuthenticated}}
            <div class="post-form">
                <h3>Êñ∞„Åó„ÅÑÊäïÁ®ø</h3>
                <form id="postForm" action="/posts" method="POST" enctype="multipart/form-data">
                    <textarea name="content" placeholder="‰ªä‰Ωï„Åó„Å¶„ÇãÔºü" rows="3" required></textarea>
                    <div class="form-group">
                        <input type="file" name="image" accept="image/*">
                    </div>
                    <button type="submit" class="btn btn-primary">ÊäïÁ®ø„Åô„Çã</button>
                </form>
            </div>
            {{end}}

            <div class="posts">
                <h3>„Çø„Ç§„É†„É©„Ç§„É≥</h3>
                {{range .Posts}}
                <div class="post" data-post-id="{{.ID}}">
                    <div class="post-header">
                        <img src="{{.Avatar}}" alt="{{.Username}}" class="avatar">
                        <div class="post-info">
                            <strong>{{.Username}}</strong>
                            <span class="post-time">{{.CreatedAt.Format "2006-01-02 15:04"}}</span>
                        </div>
                    </div>
                    <div class="post-content">
                        <p>{{.Content}}</p>
                        {{if .ImageURL}}
                        <img src="{{.ImageURL}}" alt="ÊäïÁ®øÁîªÂÉè" class="post-image">
                        {{end}}
                    </div>
                    <div class="post-actions">
                        <button class="btn btn-sm like-btn" data-post-id="{{.ID}}">
                            ‚ù§Ô∏è <span class="like-count">{{.Likes}}</span>
                        </button>
                        <button class="btn btn-sm comment-btn" data-post-id="{{.ID}}">
                            üí¨ <span class="comment-count">{{.Comments}}</span>
                        </button>
                        {{if eq .UserID $.CurrentUserID}}
                        <button class="btn btn-sm btn-danger delete-btn" data-post-id="{{.ID}}">ÂâäÈô§</button>
                        {{end}}
                    </div>
                    <div class="comments" id="comments-{{.ID}}" style="display:none;">
                        <div class="comment-form">
                            <form class="comment-submit" data-post-id="{{.ID}}">
                                <input type="text" name="content" placeholder="„Ç≥„É°„É≥„Éà„ÇíÂÖ•Âäõ..." required>
                                <button type="submit" class="btn btn-sm">ÈÄÅ‰ø°</button>
                            </form>
                        </div>
                        <div class="comment-list" id="comment-list-{{.ID}}">
                        </div>
                    </div>
                </div>
                {{end}}
            </div>
        </div>

        <div class="col-md-4">
            <div class="sidebar">
                {{if .IsAuthenticated}}
                <div class="user-info">
                    <img src="{{.CurrentUser.Avatar}}" alt="{{.CurrentUser.Username}}" class="avatar">
                    <h4>{{.CurrentUser.Username}}</h4>
                    <p>{{.CurrentUser.Bio}}</p>
                </div>
                {{end}}

                <div class="suggestions">
                    <h4>„Åä„Åô„Åô„ÇÅ„É¶„Éº„Ç∂„Éº</h4>
                    {{range .SuggestedUsers}}
                    <div class="user-suggestion">
                        <img src="{{.Avatar}}" alt="{{.Username}}" class="avatar-sm">
                        <span>{{.Username}}</span>
                        <button class="btn btn-sm follow-btn" data-user-id="{{.ID}}">„Éï„Ç©„É≠„Éº</button>
                    </div>
                    {{end}}
                </div>
            </div>
        </div>
    </div>
</div>
{{end}}